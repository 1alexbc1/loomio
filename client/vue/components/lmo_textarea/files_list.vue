<script lang="coffee">
module.exports =
  props:
    files: Array
  methods:
    progressStyle: (width) ->
      {'background-color': @$vuetify.theme.accent, 'width': width+'%'}
</script>

<template lang="pug">
.files-list(v-if="files.length")
  p(v-t='"common.attachments"')
  ul
    li(v-for="wrapper in files" :key="wrapper.key")
      .files-list__item
        v-icon.files-list__icon mdi-image
        span.files-list__file-name {{wrapper.file.name}}
        span.files-list__progress(v-if="!wrapper.blob")
          span.files-list__progress-bar(:style="progressStyle(wrapper.percentComplete)")
        v-btn.files-list__remove(icon @click="$emit('removeFile', wrapper.file.name)")
          v-icon mdi-close
      p(v-if="wrapper.blob")
        img(:src="wrapper.blob.preview_url")
</template>

<style lang="scss">
@import 'variables';
.files-list {
}
.files-list ul {
  padding-left: 0;
}
.files-list li {
  list-style: none;
}
.files-list__icon {
}

.files-list__item {
  display: flex;
  align-items: center;
}

.files-list__file-name {
  flex-grow: 1;
}

.files-list__progress {
  flex-grow: 1;
  display: flex;
  height: 16px;
  border: 1px solid $border-color;
}

.files-list__progress-bar {
  width: 0;
  transition: width 120ms ease-out, opacity 60ms 60ms ease-in;
}

.files-list__remove {
}
.files-list p img {
  width: 100%;
}

</style>
